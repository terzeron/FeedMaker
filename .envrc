if [ ! -d .venv ]; then
  uv venv
fi

source .venv/bin/activate

# Load .env file
dotenv_if_exists

# Cairo library path for cairosvg (macOS and Linux)
if [ "$(uname)" = "Darwin" ]; then
    # macOS
    if [ -d "/opt/homebrew/lib" ]; then
        # Apple Silicon
        export DYLD_FALLBACK_LIBRARY_PATH="/opt/homebrew/lib:${DYLD_FALLBACK_LIBRARY_PATH:-}"
    elif [ -d "/usr/local/lib" ]; then
        # Intel Mac
        export DYLD_FALLBACK_LIBRARY_PATH="/usr/local/lib:${DYLD_FALLBACK_LIBRARY_PATH:-}"
    fi
else
    # Linux
    export LD_LIBRARY_PATH="/usr/local/lib:/usr/lib:${LD_LIBRARY_PATH:-}"
fi